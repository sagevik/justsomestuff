# Monitors - Uncomment this and set your monitor if on vm
# monitorrule=Virtial-1,0.55,1,tile,0,1,0,0,1920,1080,60
# Heavily Inspired by Argos Nothing's DWM Re-write + Fun stuff.
# Check his out here: https://github.com/argosnothing/mango-dwm-config/

# Colors (based on vague neovim colorscheme)
# black=0x252530ff
# red=0xd8647eff
# green=0x7fa563ff
# yellow=0xf3be7cff
# blue=0x6e94b2ff
# magenta=0xbb9dbdff
# cyan=0xaeaed1ff
# white=0xcdcdcdff

#-------------------------------------------------------------------------------------------------
# Autostart with mango
#-------------------------------------------------------------------------------------------------
exec-once=kanshi &
# exec-once=~/.config/mango/scripts/setup_displays.sh &
exec-once=waybar -c ~/.config/mango/config.jsonc -s ~/.config/mango/style.css &
exec-once=hypridle &
exec-once=swaybg -i ~/pix/wallpapers/.current -m fill &
exec-once=swaync &
exec-once=nm-applet &
exec-once=blueman-applet &
exec-once=xrdb -merge /home/rs/.Xresources &
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once=foot --server &

exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=wlroots
exec-once=/usr/lib/xdg-desktop-portal-wlr &
exec-once=/usr/lib/xdg-desktop-portal &
exec-once=wl-paste --type text --watch cliphist store &
exec-once=wl-paste --type image --watch cliphist store &

#-------------------------------------------------------------------------------------------------
# Keybinds
#-------------------------------------------------------------------------------------------------
# Menus and launchers
bind=SUPER,Escape,spawn,~/.config/mango/scripts/powermenu.sh
bind=SUPER+ALT,Escape,spawn,~/.config/mango/scripts/powerprofile.sh set
bind=SUPER,Return,spawn,foot
bind=SUPER,p,spawn,$HOME/.config/mango/scripts/menu.sh
bind=SUPER,b,spawn,$HOME/.config/mango/scripts/rebar.sh
bind=SUPER+SHIFT,p,spawn,$HOME/.config/mango/scripts/rofi.sh

# Make window master
bind=SUPER+SHIFT,Return,zoom

# Clipboard history
bind=ALT+SHIFT,C,spawn,$HOME/.config/mango/scripts/clipboard_history.sh

# Bookmarks
bind=ALT,b,spawn,$HOME/.config/mango/scripts/bookmarks.sh

# Websearch
bind=SUPER,w,spawn,$HOME/.config/mango/scripts/websearch.sh Google
bind=SUPER+SHIFT,w,spawn,$HOME/.config/mango/scripts/websearch.sh

# Displays
bind=SUPER,F11,spawn,$HOME/.config/mango/scripts/displays.sh
bind=none,F11,spawn,$HOME/.config/mango/scripts/setup_displays.sh

# Screenshot
bind=none,Print,spawn,$HOME/.config/mango/scripts/snip.sh

# Snippets
bind=ALT,s,spawn,$HOME/.config/mango/scripts/snippets.sh get
bind=ALT+SHIFT,s,spawn,$HOME/.config/mango/scripts/snippets.sh set
bind=ALT+CTRL+SHIFT,s,spawn,$HOME/.config/mango/scripts/snippets.sh

# Switch view/tags
bind=SUPER,1,comboview,1
bind=SUPER,2,comboview,2
bind=SUPER,3,comboview,3
bind=SUPER,4,comboview,4
bind=SUPER,5,comboview,5
bind=SUPER,6,comboview,6
bind=SUPER,7,comboview,7
bind=SUPER,8,comboview,8
bind=SUPER,9,comboview,9

# Move to tag
bind=SUPER+SHIFT,1,tag,1
bind=SUPER+SHIFT,2,tag,2
bind=SUPER+SHIFT,3,tag,3
bind=SUPER+SHIFT,4,tag,4
bind=SUPER+SHIFT,5,tag,5
bind=SUPER+SHIFT,6,tag,6
bind=SUPER+SHIFT,7,tag,7
bind=SUPER+SHIFT,8,tag,8
bind=SUPER+SHIFT,9,tag,9

# Move to tag silent
bind=SUPER+CTRL,1,tagsilent,1
bind=SUPER+CTRL,2,tagsilent,2
bind=SUPER+CTRL,3,tagsilent,3
bind=SUPER+CTRL,4,tagsilent,4
bind=SUPER+CTRL,5,tagsilent,5
bind=SUPER+CTRL,6,tagsilent,6
bind=SUPER+CTRL,7,tagsilent,7
bind=SUPER+CTRL,8,tagsilent,8
bind=SUPER+CTRL,9,tagsilent,9

# Toggle tag on window
bind=SUPER+CTRL+SHIFT,1,toggletag,1
bind=SUPER+CTRL+SHIFT,2,toggletag,2
bind=SUPER+CTRL+SHIFT,3,toggletag,3
bind=SUPER+CTRL+SHIFT,4,toggletag,4
bind=SUPER+CTRL+SHIFT,5,toggletag,5
bind=SUPER+CTRL+SHIFT,6,toggletag,6
bind=SUPER+CTRL+SHIFT,7,toggletag,7
bind=SUPER+CTRL+SHIFT,8,toggletag,8
bind=SUPER+CTRL+SHIFT,9,toggletag,9

# Resize focused window
bind=SUPER+SHIFT,h,resizewin,-25,0
bind=SUPER+SHIFT,j,resizewin,0,+25
bind=SUPER+SHIFT,k,resizewin,0,-25
bind=SUPER+SHIFT,l,resizewin,+25,0

# Number of masters
bind=SUPER,i,incnmaster,+1
bind=SUPER+SHIFT,i,incnmaster,-1

# Close window
bind=SUPER,q,killclient

# Config
bind=SUPER+SHIFT,r,reload_config

# Select or tag monitor
bind=SUPER,comma,focusmon,left
bind=SUPER,period,focusmon,right
bind=SUPER+CTRL,comma,tagmon,left
bind=SUPER+CTRL,period,tagmon,right

# Layouts
bind=SUPER,t,setlayout,tile
bind=SUPER+SHIFT,t,setlayout,vertical_tile
bind=SUPER+CTRL,t,setlayout,right_tile
bind=SUPER+CTRL+SHIFT,t,setlayout,vertical_grid
bind=SUPER,m,setlayout,monocle
bind=SUPER+SHIFT,m,setlayout,center_tile
bind=SUPER+CTRL,m,setlayout,scroller
bind=SUPER+CTRL+SHIFT,m,setlayout,vertical_scroller
bind=SUPER,n,switch_layout
bind=SUPER,a,togglegaps

bind=SUPER+SHIFT,f,togglefullscreen,
bind=SUPER,f,togglefloating,
bind=SUPER,g,toggleglobal

# Scroller proportions
bind=SUPER,r,switch_proportion_preset
bind=SUPER+ALT,1,set_proportion,1.0
bind=SUPER+ALT,2,set_proportion,0.5
bind=SUPER+ALT,3,set_proportion,0.33
bind=SUPER+ALT,4,set_proportion,0.25

# Window switching
# Tab = code:23
bind=SUPER,code:23,focusstack,next
bind=SUPER+SHIFT,code:23,focusstack,prev

bind=SUPER,c,centerwin
bind=SUPER+SHIFT,c,centerwin

# Smartmovewin
bind=CTRL+SHIFT,k,smartmovewin,up
bind=CTRL+SHIFT,j,smartmovewin,down
bind=CTRL+SHIFT,h,smartmovewin,left
bind=CTRL+SHIFT,l,smartmovewin,right

# Smartresize
bind=ALT+CTRL+SHIFT,k,smartresizewin,up
bind=ALT+CTRL+SHIFT,j,smartresizewin,down
bind=ALT+CTRL+SHIFT,h,smartresizewin,left
bind=ALT+CTRL+SHIFT,l,smartresizewin,right

# Switch window focus
bind=SUPER,j,focusstack,next
bind=SUPER,k,focusstack,prev
bind=SUPER,h,focusdir,left
bind=SUPER,l,focusdir,right

# Swap window
bind=SUPER+CTRL,k,exchange_client,up
bind=SUPER+CTRL,j,exchange_client,down
bind=SUPER+CTRL,h,exchange_client,left
bind=SUPER+CTRL,l,exchange_client,right

# Overview
bind=ALT,code:23,toggleoverview

# Audio
bind=none,XF86AudioRaiseVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%+
bind=none,XF86AudioLowerVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%-
bind=none,XF86AudioMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Mic
bind=SUPER,XF86AudioRaiseVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 1%+
bind=SUPER,XF86AudioLowerVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 1%-
bind=none,XF86AudioMicMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind=SUPER,XF86AudioMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Screen brightness
bind=none,XF86MonBrightnessUp,spawn,$HOME/.config/mango/scripts/brightness.sh up
bind=none,XF86MonBrightnessDown,spawn,$HOME/.config/mango/scripts/brightness.sh down
bind=SUPER,XF86MonBrightnessDown,spawn,$HOME/.config/mango/scripts/brightness.sh setbrightness

#-------------------------------------------------------------------------------------------------
# Look and feel
#-------------------------------------------------------------------------------------------------
# Gaps
gappih=2
gappiv=2
gappoh=2
gappov=2

# Borders
borderpx=2
border_radius=0
no_border_when_single=0

# Colors
focuscolor=0xf3be7cff
globalcolor=0xd8647eff
scratchpadcolor=0xf3be7cff

# Overview
enable_hotarea=0
hotarea_size=10
ov_tab_mode=1
overviewgappi=5
overviewgappo=10

#-------------------------------------------------------------------------------------------------
# Mouse settings
#-------------------------------------------------------------------------------------------------
# Mouse Button Bindings
mouse_natural_scrolling=1
mousebind=SUPER,btn_left,moveresize,curmove
mousebind=SUPER,btn_right,moveresize,curresize

#-------------------------------------------------------------------------------------------------
# Keyboard settings
#-------------------------------------------------------------------------------------------------
xkb_rules_layout=no
xkb_rules_options=caps:escape
repeat_rate=35
repeat_delay=200

#-------------------------------------------------------------------------------------------------
# Trackpad settings, need relogin to make it apply
#-------------------------------------------------------------------------------------------------
disable_trackpad=0
tap_to_click=1
tap_and_drag=1
drag_lock=1
trackpad_natural_scrolling=1
disable_while_typing=1
left_handed=0
middle_button_emulation=0
swipe_min_threshold=1
accel_profile=2

# Gesturebind
gesturebind=none,left,3,focusdir,left
gesturebind=none,right,3,focusdir,right
gesturebind=none,up,3,focusdir,up
gesturebind=none,down,3,focusdir,down
gesturebind=none,left,4,viewtoleft_have_client
gesturebind=none,right,4,viewtoright_have_client
gesturebind=none,up,4,toggleoverview
gesturebind=none,down,4,toggleoverview

#-------------------------------------------------------------------------------------------------
# Effects
#-------------------------------------------------------------------------------------------------
blur=0
shadows = 0

# Animations
animations=0

#-------------------------------------------------------------------------------------------------
# Layout Settings
#-------------------------------------------------------------------------------------------------
drag_tile_to_tile=1

# Scroller
scroller_structs=5
scroller_default_proportion=0.5
scroller_focus_center=0
scroller_prefer_center=1
edge_scroller_pointer_focus=1
scroller_default_proportion_single=0.5
scroller_proportion_preset=0.25,0.33,0.5,0.66,0.75,1.0

# Center Tile
center_master_overspread=0
center_when_single_stack=1

# Tile
new_is_master=1
default_mfact=0.55
default_nmaster=1

#-------------------------------------------------------------------------------------------------
# Scratchpad settings
#-------------------------------------------------------------------------------------------------
single_scratchpad=0
# Named Scratchpads
# toggle_named_scratchpad,[appid],[title],[cmd]
bind=SUPER+SHIFT,A,toggle_named_scratchpad,Bitwarden,none,bitwarden-desktop
bind=SUPER+SHIFT,A,spawn,~/.config/mango/scripts/bitwarden_clipboard_guard.sh
windowrule=isnamedscratchpad:1,width:1000,height:800,appid:Bitwarden

bind=SUPER+SHIFT,S,toggle_named_scratchpad,scratchs,none,foot -a scratchs
windowrule=isnamedscratchpad:1,width:950,height:750,appid:scratchs

bind=SUPER+SHIFT,D,toggle_named_scratchpad,scratchd,none,foot -a scratchd -T dd_foot
windowrule=isnamedscratchpad:1,width:1280,height:800,appid:scratchd

# Put a window in scratchpad
bind=SUPER+CTRL,u,minimized

# Go through all the scratchpads
bind=SUPER+SHIFT,U,toggle_scratchpad

# move out a window from scratchpad link
# you can also togglefloating to move out
bind=SUPER+ALT,u,restore_minimized

#-------------------------------------------------------------------------------------------------
# Rules
#-------------------------------------------------------------------------------------------------
# Tag rules
# Layouts in mango are per tag. So we'll set all tags to tile by default. 
tagrule=id:1,layout_name:tile
tagrule=id:2,layout_name:tile
tagrule=id:3,layout_name:tile
tagrule=id:4,layout_name:tile
tagrule=id:5,layout_name:tile
tagrule=id:6,layout_name:tile
tagrule=id:7,layout_name:tile
tagrule=id:8,layout_name:tile
tagrule=id:9,layout_name:tile

# Windowrules
# source=./windowrules.conf

# Qalculate-gtk
windowrule=isfloating:1,width:800,height:500,appid:qalculate-gtk
# Nautilus sushi previewer
windowrule=isfloating:1,width:800,height:500,appid:org.gnome.NautilusPreviewer
# DicomBrowser
windowrule=isfloating:1,width:800,height:400,title:DicomBrowser
# GlobalProtect VPN
windowrule=isfloating:1,width:800,height:500,appid:GlobalProtect_VPN
# Dragon-drop as global
windowrule=isfloating:1,isglobal:1,center:1,appid:dragon-drop
# Bluetooth
windowrule=isfloating:1,center:1,width:800,height:500,appid:blueman-manager
# Pavucontrol
windowrule=isfloating:1,center:1,width:900,height:700,appid:pavucontrol

# # Bitwarden popup
# windowrule=isfloating:1,noopenmaximized:1,noblur:1,width:600,height:600,appid:brave-browser,title:Bitwarden
# # Picture-in-Picture
# windowrule=isfloating:1,isnoshadow:1,ignore_maximize:1,ignore_minimize:1,width:480,height:270,appid:brave-browser,title:Picture-in-Picture
# # Save / Open dialogs
# windowrule=isfloating:1,noopenmaximized:1,appid:brave-browser,title:^(Save|Open|Export)
# windowrule=isfloating:1,noopenmaximized:1,title:^(Open File|Save File|Preferences|Properties|About)
# # Network
# windowrule=isfloating:1,center:1,width:900,height:600,appid:nm-connection-editor
# windowrule=isfloating:1,center:1,width:800,height:800,title:^(nmtui)
# # Qt y GTK managers
# windowrule=isfloating:1,center:1,width:800,height:600,appid:qt5ct
# windowrule=isfloating:1,center:1,width:800,height:600,appid:lxappearance
