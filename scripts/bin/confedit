#!/usr/bin/env bash

# Script to edit configs using fzf, launchable from terminal or dmenu

# Declare associative array for configuration files
declare -A configs=(
    ["bat"]="$HOME/.config/bat/config"
    ["foot"]="$HOME/.config/foot/foot.ini"
    ["hyprlock"]="$HOME/.config/hypr"
    ["imv"]="$HOME/.config/imv/config"
    ["mango"]="$HOME/.config/mango/"
    ["mimelist"]="$HOME/.config/mimeapps.list"
    ["mpv"]="$HOME/.config/mpv/mpv.conf"
    ["nvim"]="$HOME/.config/nvim/"
    ["swaync"]="$HOME/.config/swaync"
    ["tmux"]="$HOME/.config/tmux/tmux.conf"
    ["waybar"]="$HOME/.config/waybar"
    ["xinitrc"]="$HOME/.xinitrc"
    ["yazi"]="$HOME/.config/yazi"
    ["zathura"]="$HOME/.config/zathura/zathurarc"
    ["zsh"]="$HOME/.config/zsh/.zshrc"
    # Add more configs as needed
)

# Function to run fzf menu and open nvim
run_menu() {
    trap 'exit 0' INT TERM
    menu="$(printf '%s\n' "${!configs[@]}" | sort -u | fzf --prompt="Edit config for: " --border=rounded --margin=3% --height 100% --reverse)"
    if [ -z "$menu" ]; then
        exit 0
    fi
    if [[ -z "${configs[$menu]}" ]]; then
        exit 0
    fi
    nvim "${configs[$menu]}"
}

if [[ -t 1 ]]; then
  run_menu
else
  notify-send "Confedit" "Run me in a terminal"
fi
